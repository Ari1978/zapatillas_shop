<div class="container my-4">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h1 class="mb-0">Gestión de Usuarios</h1>
    <a href="/logout" class="btn btn-outline-danger btn-sm">
      <i class="bi bi-box-arrow-right"></i> Cerrar sesión
    </a>
  </div>

  {{#if users.length}}
  <div class="table-responsive shadow rounded bg-white p-3">
    <table class="table table-striped align-middle">
      <thead class="table-success">
        <tr>
          <th>Nombre</th>
          <th>Email</th>
          <th>Rol</th>
          <th>Fecha de registro</th>
          <th class="text-center">Acciones</th>
        </tr>
      </thead>
      <tbody>
        {{#each users}}
        <tr>
          <td>{{this.first_name}} {{this.last_name}}</td>
          <td>{{this.email}}</td>
          <td>{{this.role}}</td>
          <td>{{formatDate this.createdAt}}</td>
          <td class="text-center">
            <a href="/admin/users/edit/{{this.id}}" class="btn btn-sm btn-outline-primary me-2">
              <i class="bi bi-pencil"></i> Editar
            </a>
            <a href="/admin/users/delete/{{this.id}}" class="btn btn-sm btn-outline-danger">
              <i class="bi bi-trash"></i> Eliminar
            </a>
          </td>
        </tr>
        {{/each}}
      </tbody>
    </table>
  </div>
  {{else}}
  <div class="alert alert-info text-center mt-4">
    No hay usuarios registrados aún.
  </div>
  {{/if}}

  <div class="text-center mt-4">
    <a href="/adminPanel" class="btn btn-secondary">Volver</a>
  </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.min.js"></script>
<script>
  Handlebars.registerHelper('formatDate', (date) => {
    if (!date) return '';
    const d = new Date(date);
    return d.toLocaleDateString('es-AR', { year: 'numeric', month: 'long', day: 'numeric' });
  });
</script>
